{"ast":null,"code":"import _asyncToGenerator from \"D:/po/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { store } from '../../store/store';\nimport { sendPost } from '../../api/sendPost';\nimport { buildOptions } from '../../utils/buildOptions/buildOptions';\nimport { validateParams } from '../../utils/validateParams/validateParams';\nimport { validateTemplateParams } from '../../utils/validateTemplateParams/validateTemplateParams';\nimport { isHeadless } from '../../utils/isHeadless/isHeadless';\nimport { headlessError } from '../../errors/headlessError/headlessError';\nimport { isBlockedValueInParams } from '../../utils/isBlockedValueInParams/isBlockedValueInParams';\nimport { blockedEmailError } from '../../errors/blockedEmailError/blockedEmailError';\nimport { isLimitRateHit } from '../../utils/isLimitRateHit/isLimitRateHit';\nimport { limitRateError } from '../../errors/limitRateError/limitRateError';\n/**\n * Send a template to the specific EmailJS service\n * @param {string} serviceID - the EmailJS service ID\n * @param {string} templateID - the EmailJS template ID\n * @param {object} templateParams - the template params, what will be set to the EmailJS template\n * @param {object} options - the EmailJS SDK config options\n * @returns {Promise<EmailJSResponseStatus>}\n */\nexport const send = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (serviceID, templateID, templateParams, options) {\n    const opts = buildOptions(options);\n    const publicKey = opts.publicKey || store.publicKey;\n    const blockHeadless = opts.blockHeadless || store.blockHeadless;\n    const storageProvider = opts.storageProvider || store.storageProvider;\n    const blockList = {\n      ...store.blockList,\n      ...opts.blockList\n    };\n    const limitRate = {\n      ...store.limitRate,\n      ...opts.limitRate\n    };\n    if (blockHeadless && isHeadless(navigator)) {\n      return Promise.reject(headlessError());\n    }\n    validateParams(publicKey, serviceID, templateID);\n    validateTemplateParams(templateParams);\n    if (templateParams && isBlockedValueInParams(blockList, templateParams)) {\n      return Promise.reject(blockedEmailError());\n    }\n    if (yield isLimitRateHit(location.pathname, limitRate, storageProvider)) {\n      return Promise.reject(limitRateError());\n    }\n    const params = {\n      lib_version: '4.4.1',\n      user_id: publicKey,\n      service_id: serviceID,\n      template_id: templateID,\n      template_params: templateParams\n    };\n    return sendPost('/api/v1.0/email/send', JSON.stringify(params), {\n      'Content-type': 'application/json'\n    });\n  });\n  return function send(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}