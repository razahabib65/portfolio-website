{"ast":null,"code":"import _asyncToGenerator from \"D:/po/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { validateLimitRateParams } from '../validateLimitRateParams/validateLimitRateParams';\nconst getLeftTime = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (id, throttle, storage) {\n    const lastTime = Number((yield storage.get(id)) || 0);\n    return throttle - Date.now() + lastTime;\n  });\n  return function getLeftTime(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport const isLimitRateHit = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(function* (defaultID, options, storage) {\n    if (!options.throttle || !storage) {\n      return false;\n    }\n    validateLimitRateParams(options.throttle, options.id);\n    const id = options.id || defaultID;\n    const leftTime = yield getLeftTime(id, options.throttle, storage);\n    if (leftTime > 0) {\n      return true;\n    }\n    yield storage.set(id, Date.now().toString());\n    return false;\n  });\n  return function isLimitRateHit(_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["validateLimitRateParams","getLeftTime","_ref","_asyncToGenerator","id","throttle","storage","lastTime","Number","get","Date","now","_x","_x2","_x3","apply","arguments","isLimitRateHit","_ref2","defaultID","options","leftTime","set","toString","_x4","_x5","_x6"],"sources":["D:/po/node_modules/@emailjs/browser/es/utils/isLimitRateHit/isLimitRateHit.js"],"sourcesContent":["import { validateLimitRateParams } from '../validateLimitRateParams/validateLimitRateParams';\nconst getLeftTime = async (id, throttle, storage) => {\n    const lastTime = Number((await storage.get(id)) || 0);\n    return throttle - Date.now() + lastTime;\n};\nexport const isLimitRateHit = async (defaultID, options, storage) => {\n    if (!options.throttle || !storage) {\n        return false;\n    }\n    validateLimitRateParams(options.throttle, options.id);\n    const id = options.id || defaultID;\n    const leftTime = await getLeftTime(id, options.throttle, storage);\n    if (leftTime > 0) {\n        return true;\n    }\n    await storage.set(id, Date.now().toString());\n    return false;\n};\n"],"mappings":";AAAA,SAASA,uBAAuB,QAAQ,oDAAoD;AAC5F,MAAMC,WAAW;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,EAAE,EAAEC,QAAQ,EAAEC,OAAO,EAAK;IACjD,MAAMC,QAAQ,GAAGC,MAAM,CAAC,OAAOF,OAAO,CAACG,GAAG,CAACL,EAAE,CAAC,KAAK,CAAC,CAAC;IACrD,OAAOC,QAAQ,GAAGK,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGJ,QAAQ;EAC3C,CAAC;EAAA,gBAHKN,WAAWA,CAAAW,EAAA,EAAAC,GAAA,EAAAC,GAAA;IAAA,OAAAZ,IAAA,CAAAa,KAAA,OAAAC,SAAA;EAAA;AAAA,GAGhB;AACD,OAAO,MAAMC,cAAc;EAAA,IAAAC,KAAA,GAAAf,iBAAA,CAAG,WAAOgB,SAAS,EAAEC,OAAO,EAAEd,OAAO,EAAK;IACjE,IAAI,CAACc,OAAO,CAACf,QAAQ,IAAI,CAACC,OAAO,EAAE;MAC/B,OAAO,KAAK;IAChB;IACAN,uBAAuB,CAACoB,OAAO,CAACf,QAAQ,EAAEe,OAAO,CAAChB,EAAE,CAAC;IACrD,MAAMA,EAAE,GAAGgB,OAAO,CAAChB,EAAE,IAAIe,SAAS;IAClC,MAAME,QAAQ,SAASpB,WAAW,CAACG,EAAE,EAAEgB,OAAO,CAACf,QAAQ,EAAEC,OAAO,CAAC;IACjE,IAAIe,QAAQ,GAAG,CAAC,EAAE;MACd,OAAO,IAAI;IACf;IACA,MAAMf,OAAO,CAACgB,GAAG,CAAClB,EAAE,EAAEM,IAAI,CAACC,GAAG,CAAC,CAAC,CAACY,QAAQ,CAAC,CAAC,CAAC;IAC5C,OAAO,KAAK;EAChB,CAAC;EAAA,gBAZYN,cAAcA,CAAAO,GAAA,EAAAC,GAAA,EAAAC,GAAA;IAAA,OAAAR,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GAY1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}